<!-- Mermaid Einbindung -->
<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ 
    startOnLoad: false,
    theme: 'forest',
    securityLevel: 'loose'
  });
  
  document.addEventListener("DOMContentLoaded", async () => {
    // Codeblöcke mit Mermaid-Klasse finden
    document.querySelectorAll('code.language-mermaid').forEach((block) => {
      const pre = block.parentElement;
      const container = document.createElement('div');
      container.className = 'mermaid';
      container.textContent = block.textContent;
      pre.parentNode.replaceChild(container, pre);
    });
    
    await mermaid.run();
  });
</script>
<!-- Ende Mermaid Einbindung -->

<!-- Plausible Analytics Einbindung -->
<script defer data-domain="blog.metawops.de" src="https://plausible.io/js/script.js"></script>
<!-- Ende Plausible Analytics Einbindung -->

<!-- Podlove Player Einbindung -->
<script src="https://cdn.podlove.org/web-player/5.x/embed.js"></script>
<!-- Ende Podlove Player Einbindung -->

<!-- FavIcon stuff -->
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="manifest" href="/site.webmanifest" />
<!-- Ende FavIcon stuff -->

<!-- Theme Switching Stuff -->
<script>
  // Sofort beim Laden prüfen, welches Theme aktiv sein soll
  const storageTheme = localStorage.getItem('theme');
  const systemColorScheme = window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (storageTheme === 'dark' || (!storageTheme && systemColorScheme)) {
    document.documentElement.setAttribute('data-theme', 'dark');
  } else {
    document.documentElement.setAttribute('data-theme', 'light');
  }
</script>
 <!-- Ende Theme Switching Stuff-->